{"version":3,"sources":["webpack:///./src/views/SearchResultTest.vue","webpack:///./src/views/SearchResultTest.vue?17c0","webpack:///./src/views/SearchResultTest.vue?cf45"],"names":["class","src","alt","active","isLoading","color","loaderColor","width","loaderWidth","height","loaderHeight","data","searchedData","touristType","filteredType","resultPath","path","card_section_title_text","mixins","getDataMixin","allData","filteredCity","keywords","computed","placeUrl","console","log","this","foodUrl","eventUrl","methods","matchKeywords","database","filter","name","ScenicSpotName","RestaurantName","ActivityName","match","processFillterData","getPlaceData","getFoodData","getEventData","props","watch","inputKeywords","$route","fullPath","city","type","created","window","scrollTo","getAllData","placeData","foodData","eventData","__exports__","render"],"mappings":"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","file":"js/chunk-2ceef811.62fcd3fa.js","sourcesContent":["<template>\n  <Loading\n    :active=\"isLoading\"\n    :color=\"loaderColor\"\n    :width=\"loaderWidth\"\n    :height=\"loaderHeight\"\n  ></Loading>\n  <HeaderSectionTest></HeaderSectionTest>\n  <PopularSectionTest\n    :data=\"searchedData\"\n    :touristType=\"filteredType\"\n    :resultPath=\"path\"\n  >\n    <template #card_section_title_text>\n      <div\n        class=\"card_section_title_search_text\"\n        v-if=\"filteredType === 'ScenicSpot'\"\n      >\n        <span>熱門景點</span>\n        <img src=\"@/assets/images/place-icon.png\" alt=\"place-icon\" />\n      </div>\n      <div\n        class=\"card_section_title_search_text\"\n        v-else-if=\"filteredType === 'Restaurant'\"\n      >\n        <span>熱門美食</span>\n        <img src=\"@/assets/images/restaurant-icon.png\" alt=\"restaurant-icon\" />\n      </div>\n      <div\n        class=\"card_section_title_search_text\"\n        v-else-if=\"filteredType === 'Activity'\"\n      >\n        <span>近期活動</span>\n        <img src=\"@/assets/images/event-icon.png\" alt=\"event-icon\" />\n      </div>\n      <div v-else>搜尋結果 <i class=\"fas fa-lg fa-search\"></i></div>\n    </template>\n  </PopularSectionTest>\n</template>\n\n<script>\nimport getDataMixin from '@/mixins/getDataMixin.js';\n\nexport default {\n  mixins: [getDataMixin],\n  data() {\n    return {\n      allData: [],\n      searchedData: [],\n      filteredType: '',\n      filteredCity: '',\n      keywords: '',\n      path: '',\n      // Loader\n      isLoading: false,\n      loaderWidth: 150,\n      loaderHeight: 150,\n      loaderColor: 'rgba(47, 121, 140, 1)'\n    };\n  },\n  computed: {\n    placeUrl() {\n      console.log('觸發 placeUrl', this.filteredCity);\n      return `https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/${this.filteredCity}?&$format=JSON`;\n    },\n    foodUrl() {\n      console.log('觸發 foodUrl', this.filteredCity);\n      return `https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant/${this.filteredCity}?&$format=JSON`;\n    },\n    eventUrl() {\n      console.log('觸發 eventUrl', this.filteredCity);\n      return `https://ptx.transportdata.tw/MOTC/v2/Tourism/Activity/${this.filteredCity}?&$format=JSON`;\n    }\n  },\n  methods: {\n    matchKeywords(database, keywords) {\n      this.searchedData = database.filter((data) => {\n        const name = data.ScenicSpotName\n          ? data.ScenicSpotName\n          : data.RestaurantName\n          ? data.RestaurantName\n          : data.ActivityName;\n        return name.match(keywords);\n      });\n      console.log('matchKeywords searchedData', this.searchedData);\n    },\n    async processFillterData(filteredType) {\n      // 根據不同類型，抓取相對應資料\n      if (filteredType === 'ScenicSpot') {\n        this.searchedData = await this.getPlaceData();\n        console.log('開始抓資料');\n      }\n      if (filteredType === 'Restaurant') {\n        this.searchedData = await this.getFoodData();\n        console.log('開始抓資料');\n      }\n      if (filteredType === 'Activity') {\n        this.searchedData = await this.getEventData();\n        console.log('開始抓資料');\n      }\n      console.log('searchedData', this.searchedData);\n    }\n  },\n  props: ['inputKeywords', 'type', 'city'],\n  watch: {\n    async inputKeywords() {\n      console.log('inputKeywords 變動', this.inputKeywords);\n\n      // 將關鍵字與資料庫比對\n      this.matchKeywords(this.allData, this.inputKeywords);\n\n      // 讀取當前頁面路徑，並傳進 PopularSection.vue\n      this.path = this.$route.fullPath;\n      console.log('watch path', this.path);\n    },\n    async city() {\n      console.log('city 變動', this.city);\n\n      // 重新篩選後，將變數重新賦值\n      this.filteredCity = this.city;\n\n      // 重新篩選後，讀取當前頁面路徑，並傳進 PopularSection.vue\n      this.path = this.$route.fullPath;\n    },\n    async type() {\n      console.log('type 變動', this.type);\n\n      // 重新篩選後，將變數重新賦值\n      this.filteredType = this.type;\n\n      // 重新篩選後，讀取當前頁面路徑，並傳進 PopularSection.vue\n      this.path = this.$route.fullPath;\n    },\n    async filteredCity() {\n      console.log('觸發 filteredCity', this.filteredCity);\n\n      this.isLoading = true;\n      this.processFillterData(this.filteredType);\n      this.isLoading = false;\n    },\n    async filteredType() {\n      console.log('觸發 filteredType', this.filteredType);\n\n      this.isLoading = true;\n      this.processFillterData(this.filteredType);\n      this.isLoading = false;\n    }\n  },\n  async created() {\n    window.scrollTo(0, -1000);\n    console.log('created inputKeywords', this.inputKeywords);\n\n    // 搜尋用 API\n    await this.getAllData();\n    this.allData = [...this.placeData, ...this.foodData, ...this.eventData];\n\n    // 搜尋：關鍵字傳入，開始處理資料\n    this.inputKeywords && this.matchKeywords(this.allData, this.inputKeywords);\n\n    // 篩選：旅遊類型及城市傳入，watch filteredCity\n    this.filteredType = this.type;\n    this.filteredCity = this.city;\n    console.log('created filteredType', this.filteredType);\n    console.log('created filteredCity', this.filteredCity);\n\n    // 讀取當前頁面路徑，並傳進 PopularSection.vue\n    this.path = this.$route.fullPath;\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.card_section_title_search_text {\n  display: flex;\n  align-items: stretch;\n\n  img {\n    margin-left: 24px;\n    object-fit: cover;\n\n    @include mobile {\n      margin-left: 12px;\n      width: 16px;\n    }\n  }\n}\n</style>\n","import { render } from \"./SearchResultTest.vue?vue&type=template&id=0b6e4a52&scoped=true\"\nimport script from \"./SearchResultTest.vue?vue&type=script&lang=js\"\nexport * from \"./SearchResultTest.vue?vue&type=script&lang=js\"\n\nimport \"./SearchResultTest.vue?vue&type=style&index=0&id=0b6e4a52&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Volumes/Transcen/vscode/tourist-site-project-test/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b6e4a52\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./SearchResultTest.vue?vue&type=style&index=0&id=0b6e4a52&lang=scss&scoped=true\""],"sourceRoot":""}